---
import type { ClassItem, Locale } from '../types';
import IconByName from './IconByName.astro';

export interface Props {
  item: ClassItem;
  locale: Locale;
}

const { item, locale } = Astro.props;
const copy = item.copy[locale];
const isPolish = locale === 'pl';

const levelLabels = {
  pl: {
    podstawy: 'Podstawy',
    wszystkie: 'Wszystkie',
    zaawansowani: 'Zaawansowani',
    dzieci: 'Dzieci',
    mieszane: 'Mieszane'
  },
  en: {
    podstawy: 'Basics',
    wszystkie: 'All levels',
    zaawansowani: 'Advanced',
    dzieci: 'Kids',
    mieszane: 'Mixed'
  }
};
---

<div class="class-card p-5">
  <!-- Header -->
  <div class="flex items-center gap-2 mb-1">
    <IconByName name={item.icons.type} />
    <h3 class="font-semibold text-lg leading-tight text-se-ink">{copy.name}</h3>
  </div>
  
  <!-- Teaser -->
  <p class="text-sm text-neutral-700 mb-3">{copy.teaser}</p>
  
  <!-- Meta Row -->
  <div class="flex flex-wrap gap-4 text-sm mb-3">
    <span class="inline-flex items-center gap-1">
      <IconByName name={item.icons.duration} class="size-4" />
      <strong>{item.durationMin}</strong> {isPolish ? 'min' : 'min'}
    </span>
    
    {item.gear.length > 0 && (
      <span class="inline-flex items-center gap-1">
        <IconByName name={item.icons.gear} class="size-4" />
        <span>
          {isPolish ? 'Sprzęt: ' : 'Gear: '}
          {item.gear[0]}{item.gear.length > 1 ? '…' : ''}
        </span>
      </span>
    )}
    
    <span class="level-chip ml-auto">
      {levelLabels[locale][item.level]}
    </span>
  </div>
  
  <!-- Divider -->
  <div class="se-divider"></div>
  
  <!-- Body -->
  <div class="space-y-3">
    {copy.body.map((paragraph) => (
      <p class="text-sm leading-6 text-neutral-800">{paragraph}</p>
    ))}
    
    <!-- For Whom -->
    {copy.forWhom.length > 0 && (
      <div>
        <h4 class="text-sm font-semibold text-se-ink mb-2 se-line-sequence">
          {isPolish ? 'Dla kogo' : 'For whom'}
        </h4>
        <ul class="list-disc pl-5 text-sm space-y-1">
          {copy.forWhom.map((item) => (
            <li class="text-neutral-800">{item}</li>
          ))}
        </ul>
      </div>
    )}
  </div>
</div>